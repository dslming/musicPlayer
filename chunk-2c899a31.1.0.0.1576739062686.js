(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c899a31"],{"2ddb":function(e,t,i){"use strict";var n=i("e1a3"),s=i.n(n);s.a},d81d:function(e,t,i){"use strict";var n=i("23e7"),s=i("b727").map,a=i("d039"),o=i("1dde"),r=o("map"),h=r&&!a((function(){[].map.call({length:-1,0:1},(function(e){throw e}))}));n({target:"Array",proto:!0,forced:!r||!h},{map:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})},e1a3:function(e,t,i){},f8f6:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},s=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wave"},[i("div",{attrs:{id:"canvasFather"}}),i("div",{staticClass:"name"},[e._v(" 浪里个浪 ")])])}],a=i("d4ec"),o=i("bee2"),r=(i("b0c0"),i("159b"),window.THREE),h=null,c=function(){function e(t){Object(a["a"])(this,e),this.container=t,this.runFlag=!1,this.initFlag=!1,this.meshObjects=[],h=this,this.scene=new r.Scene,window.scene=this.scene,this.scene.name="moumade",this.scene.background=new r.Color(13421772),this.containerEle=document.querySelector(t),this.renderer=new r.WebGLRenderer({antialias:!0,alpha:!0,precision:"highp"}),this.renderer.setClearColor(0,0),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.containerEle.clientWidth,this.containerEle.clientHeight),this.containerEle.appendChild(this.renderer.domElement),this.initCamera(),this.initLight(),window.addEventListener("resize",this.handleResize),this.handleResize(),this.initControl(),this.initStats()}return Object(o["a"])(e,[{key:"handleResize",value:function(){var e=h.containerEle.clientWidth,t=h.containerEle.clientHeight;h.renderer.domElement.width=e,h.renderer.domElement.height=t,h.renderer.setSize(h.containerEle.clientWidth,h.containerEle.clientHeight),h.camera.aspect=e/t,h.camera.updateProjectionMatrix()}},{key:"initLight",value:function(){var e=16777215,t=16777215,i=new r.AmbientLight(e,1.5);this.scene.add(i),i.name="light",this.scene.add(i);var n=new r.SpotLight(t,1.8);n.position.set(100,69,50),n.castShadow=!1,n.name="spotLight",n.distance=1e3,this.scene.add(n)}},{key:"initCamera",value:function(){this.camera=new r.PerspectiveCamera(30,window.innerWidth/window.innerHeight,1,1e3),this.camera.position.set(49,50,-77),this.camera.name="camera",this.scene.add(this.camera)}},{key:"initControl",value:function(){this.control=new r.OrbitControls(this.camera,this.renderer.domElement),this.control.autoRotate=!1,this.control.enabled=!0}},{key:"findMesh",value:function(e){var t=this;e.children&&e.children.forEach((function(e){e instanceof r.Mesh&&(0!=t.meshObjects.length&&t.meshObjects[t.meshObjects.length-1].uuid==e.uuid||t.meshObjects.push(e)),t.findMesh(e)}))}},{key:"initStats",value:function(){var e=window.Stats;this.stats=new e,this.stats.domElement.style.position="absolute",this.stats.domElement.style.left="0px",this.stats.domElement.style.top="0px",document.querySelector(this.container).appendChild(this.stats.domElement)}},{key:"run",value:function(){h.animateId=requestAnimationFrame(h.run),h.renderer.render(h.scene,h.camera),h.control.update(),h.stats.update(),h.loopCB&&h.loopCB()}},{key:"stop",value:function(){cancelAnimationFrame(this.animateId)}},{key:"rigister",value:function(e){this.loopCB=e}},{key:"resize",value:function(){this.handleResize()}}]),e}(),d=i("11c0"),l=(i("d81d"),window.THREE),u=function(){function e(){Object(a["a"])(this,e),this.boxColor=1729517,this.box={size:1,height:10},this.gridSize=10,this.col=this.gridSize,this.row=this.gridSize,this.boxes=[],this.angle=0,this.amplitude=-.8,this.waveLength=200}return Object(o["a"])(e,[{key:"addBoxes",value:function(e){for(var t=this.box.size,i=this.box.height,n=new l.BoxGeometry(t,i,t),s=new l.MeshPhysicalMaterial({color:this.boxColor,emissive:0,roughness:1,metalness:.1,reflectivity:.5}),a=0;a<this.col;a+=t){this.boxes[a]=[];for(var o=0;o<this.row;o+=t){var r=new l.Mesh(n,s);r.castShadow=!1,r.receiveShadow=!1,r.position.y=i/2;var h=new l.Group;h.add(r),h.scale.set(1,.001,1),this.boxes[a][o]=h,h.position.set(a-.5*this.gridSize,0,o-.5*this.gridSize),e.add(h)}}console.log(this.boxes)}},{key:"distance",value:function(e,t,i,n){return Math.sqrt(Math.pow(e-i,2)+Math.pow(t-n,2))}},{key:"map",value:function(e,t,i,n,s){return(e-t)/(i-t)*(s-n)+n}},{key:"addStageObjects",value:function(e){this.addBoxes(e)}},{key:"drawWave",value:function(e){for(var t=this.box.size,i=0;i<this.col;i+=t)for(var n=0;n<this.row;n+=t){var s=this.boxes[i][n].position.x,a=this.boxes[i][n].position.z,o=this.distance(s,a,0,0),r=this.map(o,0,this.waveLength,0,50),h=this.angle+r;this.boxes[i][n].scale.y=this.map(Math.sin(h),-1,1,.1,1)}this.angle+=e/400}}]),e}(),m=u,p=function(){function e(){Object(a["a"])(this,e),this.audio=d["a"]}return Object(o["a"])(e,[{key:"initStage",value:function(){var e=this;this.wave=new m,this.stage=new c("#canvasFather"),this.stage.rigister((function(){var t=d["a"].getAverageFrequency();e.wave.drawWave(t)})),this.wave.addStageObjects(this.stage.scene)}}]),e}(),v=new p,w={props:["type"],computed:{playing:function(){return v.audio.subject.playing}},mounted:function(){v.initStage()},watch:{type:{handler:function(e){"min"==e?(v.stage.resize(),v.audio.subject.playing?v.stage.run():v.stage.stop()):v.stage.stop()}},playing:{handler:function(e){e?v.stage.run():v.stage.stop()},deep:!0}}},g=w,f=(i("2ddb"),i("2877")),b=Object(f["a"])(g,n,s,!1,null,null,null);t["default"]=b.exports}}]);
//# sourceMappingURL=chunk-2c899a31.1.0.0.1576739062686.js.map
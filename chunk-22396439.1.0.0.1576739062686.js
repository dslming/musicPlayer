(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22396439"],{"013b":function(e,t,n){"use strict";var i=n("160e"),a=n.n(i);a.a},"04d3":function(e,t,n){"use strict";var i=n("23e7"),a=n("857a"),r=n("eae9");i({target:"String",proto:!0,forced:r("blink")},{blink:function(){return a(this,"blink","","")}})},"160e":function(e,t,n){},5440:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cat"},[n("div",{attrs:{id:"canvasFather"}}),n("div",{staticClass:"name"},[e._v(" 摇头小猫 ")])])}],r=(n("04d3"),n("d4ec")),s=n("bee2"),o=(n("b0c0"),n("159b"),window.THREE),c=null,l=function(){function e(t){Object(r["a"])(this,e),this.container=t,this.runFlag=!1,this.initFlag=!1,this.meshObjects=[],c=this,this.scene=new o.Scene,this.scene.name="moumade",window.scene=this.scene,this.containerEle=document.querySelector(t),this.renderer=new o.WebGLRenderer({antialias:!0,alpha:!0,precision:"highp"}),this.renderer.setClearColor(0,0),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.containerEle.clientWidth,this.containerEle.clientHeight),this.containerEle.appendChild(this.renderer.domElement),this.initLight(),this.initCamera(),window.addEventListener("resize",this.handleResize),this.handleResize(),this.initStats()}return Object(s["a"])(e,[{key:"handleResize",value:function(){var e=c.containerEle.clientWidth,t=c.containerEle.clientHeight;c.renderer.domElement.width=e,c.renderer.domElement.height=t,c.renderer.setSize(c.containerEle.clientWidth,c.containerEle.clientHeight),c.camera.aspect=e/t,c.camera.updateProjectionMatrix()}},{key:"initLight",value:function(){var e=new o.HemisphereLight(16777215,16777215,2.5);e.name="hemisphereLight",e.position.set(0,0,0),this.scene.add(e),this.renderer.setClearColor("#6ecccc",1)}},{key:"initCamera",value:function(){this.camera=new o.PerspectiveCamera(45,this.containerEle.clientWidth/this.containerEle.clientHeight,10,2e3),this.camera.name="camera",this.scene.add(this.camera),this.camera.position.set(0,0,300)}},{key:"initControl",value:function(){this.control=new o.OrbitControls(this.camera,this.renderer.domElement),this.control.autoRotate=!1,this.control.enabled=!0}},{key:"findMesh",value:function(e){var t=this;e.children&&e.children.forEach((function(e){e instanceof o.Mesh&&(0!=t.meshObjects.length&&t.meshObjects[t.meshObjects.length-1].uuid==e.uuid||t.meshObjects.push(e)),t.findMesh(e)}))}},{key:"initStats",value:function(){var e=window.Stats;this.stats=new e,this.stats.domElement.style.position="absolute",this.stats.domElement.style.left="0px",this.stats.domElement.style.top="0px",document.querySelector(this.container).appendChild(this.stats.domElement)}},{key:"run",value:function(){c.animateId=requestAnimationFrame(c.run),c.renderer.render(c.scene,c.camera),c.stats.update(),c.loopCB&&c.loopCB()}},{key:"stop",value:function(){cancelAnimationFrame(this.animateId)}},{key:"rigister",value:function(e){this.loopCB=e}},{key:"resize",value:function(){this.handleResize()}}]),e}(),u=(n("e25e"),n("7db0"),function(){function e(){Object(r["a"])(this,e)}return Object(s["a"])(e,null,[{key:"findMesh",value:function(e,t){var n=null;return e&&e.children&&e.children.find?n=e.children.find((function(e){return e.name===t})):console.error(e,"findMesh"),n}}]),e}()),d=u,h=window.TweenMax,f=function(){function e(){Object(r["a"])(this,e)}return Object(s["a"])(e,null,[{key:"blink",value:function(t){var n=d.findMesh(t,"head"),i=d.findMesh(n,"rightEye"),a=d.findMesh(n,"leftEye");switch(e.randomNum(1,3)){case 1:h.to(i.scale,.07,{y:0,yoyo:!0,repeat:1});break;case 2:h.to(a.scale,.07,{y:0,yoyo:!0,repeat:1});break;case 3:h.to(i.scale,.07,{y:0,yoyo:!0,repeat:1}),h.to(a.scale,.07,{y:0,yoyo:!0,repeat:1});break}}},{key:"updateTail",value:function(t,n){e.t+=n;for(var i=[],a=d.findMesh(t,"tail"),r=0;r<7;r++){var s=d.findMesh(a,"t".concat(r));i.push(s),a=s}for(var o=0;o<i.length;o++){var c=Math.pow(.8,o),l=Math.sin(this.t)*(c/2);i[o].rotation.z=l}}},{key:"updataHead",value:function(e){var t=d.findMesh(e,"head");h.to(t.rotation,1,{z:-.5}),setTimeout((function(){h.to(t.rotation,1,{z:.5})}),1e3)}},{key:"randomNum",value:function(e,t){switch(arguments.length){case 1:var n=Math.random()*e+1;return parseInt(n,10);case 2:return parseInt(Math.random()*(t-e+1)+e,10);default:return 0}}}]),e}();f.t=0;var m=f,p=n("11c0"),v=window.THREE,g=function(){function e(){Object(r["a"])(this,e),this.audio=p["a"],this.loaded=!1}return Object(s["a"])(e,[{key:"addStageObjects",value:function(){var e=this,t=new v.ObjectLoader;t.load("./static/models/cat.json",(function(t){e.stage.scene.add(t),t.rotation.set(0,91,0),e.loaded=!0,setInterval((function(){m.blink(t)}),2e3),setInterval((function(){m.updataHead(t)}),3e3)}),void 0,(function(e){console.error(e)}))}},{key:"initStage",value:function(){var e=this;this.stage=new l("#canvasFather"),this.stage.rigister((function(){if(e.loaded){var t=d.findMesh(e.stage.scene,"cat"),n=p["a"].getAverageFrequency();m.updateTail(t,n/2e3)}})),this.addStageObjects()}}]),e}(),y=new g,b={props:["type"],computed:{playing:function(){return y.audio.subject.playing}},data:function(){return{}},mounted:function(){y.initStage()},methods:{},watch:{type:{handler:function(e){"min"==e?(y.stage.resize(),y.audio.subject.playing?y.stage.run():y.stage.stop()):y.stage.stop()}},playing:{handler:function(e){e?y.stage.run():y.stage.stop()},deep:!0}}},w=b,k=(n("013b"),n("2877")),E=Object(k["a"])(w,i,a,!1,null,null,null);t["default"]=E.exports},"7db0":function(e,t,n){"use strict";var i=n("23e7"),a=n("b727").find,r=n("44d2"),s="find",o=!0;s in[]&&Array(1)[s]((function(){o=!1})),i({target:"Array",proto:!0,forced:o},{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),r(s)},"857a":function(e,t,n){var i=n("1d80"),a=/"/g;e.exports=function(e,t,n,r){var s=String(i(e)),o="<"+t;return""!==n&&(o+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),o+">"+s+"</"+t+">"}},e25e:function(e,t,n){var i=n("23e7"),a=n("e583");i({global:!0,forced:parseInt!=a},{parseInt:a})},eae9:function(e,t,n){var i=n("d039");e.exports=function(e){return i((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}}}]);
//# sourceMappingURL=chunk-22396439.1.0.0.1576739062686.js.map